# -*- coding: utf-8 -*-
"""Streamlit_App (Agric).ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1Pa5eOlfuYOhSrz3RWlK3dMVFqS75YL6F
"""

import streamlit as st
import joblib
import numpy as np

# Load models and standard error
model1, std_error1 = joblib.load('income_model.pkl')
model2, std_error2 = joblib.load('crop_yield_model.pkl')

st.title("Farmers' Income and Crop Yield Prediction")

# Dropdown to select model
model_choice = st.selectbox("Select a Model:", ["Income After Loan", "Crop Yield After Loan"])

features = st.text_input("Enter income/crop yield before the loan (Don't add a comma):")

if st.button("Predict"):
    try:
        # Convert input to numpy array
        input_data = np.array([float(x) for x in features.split(",")]).reshape(1, -1)

        # Select model based on user choice
        if model_choice == "Income After Loan":
            model, std_error = model1, std_error1
        else:
            model, std_error = model2, std_error2

        # Make prediction
        prediction = model.predict(input_data)[0]

        # Compute 95% Confidence Interval
        lower_bound = prediction - 1.96 * std_error
        upper_bound = prediction + 1.96 * std_error

        # Display results
        st.success(f"Prediction: {prediction:.2f}")
        st.info(f"95% Confidence Interval: ({lower_bound:.2f}, {upper_bound:.2f})")

    except:
        st.error("Invalid input! Please enter valid numbers.")
